(this["webpackJsonpsoc-net-2.0"]=this["webpackJsonpsoc-net-2.0"]||[]).push([[0],{113:function(e,t,n){e.exports={loginButton:"loginForm_loginButton__BQ2TO"}},116:function(e,t,n){e.exports={container:"Main_container__2bX8C",main__wrapper:"Main_main__wrapper__3PW8q",content:"Main_content__2MaDP"}},117:function(e,t,n){e.exports={modal:"Popup_modal__16_ww",active:"Popup_active__2kASZ",modal_content:"Popup_modal_content__1r_Mc"}},170:function(e,t,n){e.exports={preloaderInner:"Preloader_preloaderInner__2A0uK",preloader:"Preloader_preloader__2EpXB"}},174:function(e,t,n){e.exports={successMessage:"ProfileSettings_successMessage__2cu9E",applyChangesButton:"ProfileSettings_applyChangesButton__2eADW"}},19:function(e,t,n){e.exports={main_side:"Side_main_side__2uQnr",mobileMenu:"Side_mobileMenu__3ASZH",side__list:"Side_side__list__f1FO7","side__list-link":"Side_side__list-link__23pFp","side__list-item":"Side_side__list-item__vC2Uk",active:"Side_active__2onUn",mobileMenu__list:"Side_mobileMenu__list__3v4-H","footer__list-link":"Side_footer__list-link__2eG8t",messages:"Side_messages__15Vq9",profile:"Side_profile__1pH5e",friends:"Side_friends__3Bnhj",users:"Side_users__1jDED"}},238:function(e,t,n){e.exports={authWrapper:"login_authWrapper__oTIhh"}},242:function(e,t,n){e.exports={registrationWrapper:"registration_registrationWrapper__2d217"}},292:function(e,t,n){},34:function(e,t,n){e.exports={dialogs:"Dialogs_dialogs__vPmbq",dialog:"Dialogs_dialog__39Prj",chat:"Dialogs_chat__2YOaO",messages__wrapper:"Dialogs_messages__wrapper__2V7i3",chat__wrapper:"Dialogs_chat__wrapper__3EWFp",dialog__image:"Dialogs_dialog__image__t--TB",dialog__name:"Dialogs_dialog__name__1CEph",own_message:"Dialogs_own_message__1GqOC",message_inner:"Dialogs_message_inner__3hr1k",other_message:"Dialogs_other_message__3T3LC",sender_avatar:"Dialogs_sender_avatar__35y1E",message_content:"Dialogs_message_content__2XZIB",sentAt:"Dialogs_sentAt__2hBZm",sendMessageForm:"Dialogs_sendMessageForm__23UUD",sendMessageForm__input:"Dialogs_sendMessageForm__input__29832",sendMessageForm__button:"Dialogs_sendMessageForm__button__3ERPg",createNewDialog:"Dialogs_createNewDialog__393_q",createNewDialogWrapper:"Dialogs_createNewDialogWrapper__35Tfq",usersList:"Dialogs_usersList__1DrkY",usersList__item:"Dialogs_usersList__item__uz56-",usersList__item__image:"Dialogs_usersList__item__image__cgKXl",dialogUserInfo:"Dialogs_dialogUserInfo__1ShgE",dialogUserInfo__avatar:"Dialogs_dialogUserInfo__avatar__1yO31",dialogUserInfo__status_online:"Dialogs_dialogUserInfo__status_online__3Psqn",dialogUserInfo__status_offline:"Dialogs_dialogUserInfo__status_offline__2yWtS",dialogs_wrapper:"Dialogs_dialogs_wrapper__3Ld7q"}},35:function(e,t,n){e.exports={post__item:"Post_post__item__15wBm",post__item__avatar:"Post_post__item__avatar__1yDHK",post__text:"Post_post__text__3AVLS",post__content:"Post_post__content__3h-nB",post_user_info:"Post_post_user_info__37y1K",post_user_name:"Post_post_user_name__2yJnp",post_thumbnails:"Post_post_thumbnails__3r-W-",posts_thumbnails_item:"Post_posts_thumbnails_item__-bBqQ",likeButton:"Post_likeButton__1ncl2",dislikeButton:"Post_dislikeButton__3LhPl",active:"Post_active__10QhU",User__response:"Post_User__response__30PP_",User__response__btn_inner:"Post_User__response__btn_inner__3yfdP"}},39:function(e,t,n){e.exports={Friend:"User_Friend__26t5B",friend__avatar:"User_friend__avatar__1IZ0N",friend__name:"User_friend__name__3a-ZM",online:"User_online__3J4Wu",ofline:"User_ofline__1aacl",addToFriendsButtonInner:"User_addToFriendsButtonInner__13BRB"}},425:function(e,t,n){},426:function(e,t,n){"use strict";n.r(t);var s=n(66),r=n.n(s),a=n(16),i=n(17),c=n(21),o=n(20),l=(n(292),n(5)),u=n(0),d=n.n(u),j=n(26),p=n(70),_=n.n(p),f=n(28),h=n(1),b=function(e){var t=e.data.currUserData;return Object(h.jsx)("header",{className:_.a.header,children:Object(h.jsx)("div",{className:"container",children:Object(h.jsx)("div",{className:_.a.header__content,children:Object(h.jsx)("div",{className:_.a.container,children:Object(h.jsxs)("div",{className:_.a.header__wrapper,children:[Object(h.jsx)("div",{className:_.a.header__logo,children:"PN"}),e.data.isAuth?Object(h.jsxs)("div",{className:_.a.header_user_wrapper,children:[Object(h.jsx)("img",{className:_.a.header_avatar,src:t.photo_50}),Object(h.jsx)("p",{onClick:e.Logout,className:_.a.header_logout,children:"logout"})]}):Object(h.jsx)(f.b,{to:"/Login",className:_.a.header_login,children:"Login"})]})})})})})},O=n(23),g=n.n(O),m=n(31),v=n(169),x="https://socnet-backend.herokuapp.com/auth",P=v.create({withCredentials:!0,baseURL:x});P.interceptors.request.use((function(e){return e.headers.Authorization="Bearer ".concat(localStorage.getItem("token")),e})),P.interceptors.response.use((function(e){return e}),function(){var e=Object(m.a)(g.a.mark((function e(t){var n,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.config,401!=t.response.status||!t.config||t.config._isRetry){e.next=16;break}return n._isRetry=!0,e.prev=3,e.next=6,v.get("".concat(x,"/refresh"),{withCredentials:!0});case 6:return s=e.sent,console.log(s),localStorage.setItem("token",s.data.accessToken),localStorage.setItem("user",s.data.user),e.abrupt("return",P.request(n));case 13:e.prev=13,e.t0=e.catch(3),console.log("\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043d\u0435 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d");case 16:throw t;case 17:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}());var w=function(e,t,n){return console.log(n),P.post("/login",{email:e,password:t,captcha:n}).then((function(e){return e})).catch((function(e){return e.response.data}))},N=function(){return P.post("/logout").then((function(e){return e.data}))},y=function(){return P.get("/me",{withCredentials:!0}).then((function(e){return e}))},D=function(){return P.get("/users").then((function(e){return e.data}))},k=function(e){return console.warn("Obsolete method. Please use profileApi object."),I.getUserProfile(e)},F=function(e,t,n){return P.post("/registration",{email:e,password:t,userData:n}).then((function(e){return e})).catch((function(e){return e.response.data}))},A=function(){return P.get("/refresh",{withCredentials:!0})},I={updateUserStatus:function(e){return P.put("/status",{status:e})},getUserStatus:function(e){return k(e)},getUserProfile:function(e){return e?P.get("/profile/".concat(e)):P.get("/profile/")},uploadAvatar:function(e){console.log(e);var t=new FormData;return t.append("file",e),console.log(t),P.put("/avatar",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return e}))},updateUserProfileInfo:function(e){return console.log(e),P.put("/editprofile",e).then((function(e){return e}))},getPosts:function(e){return P.get("/posts/".concat(e)).then((function(e){return e}))},addPost:function(e,t){console.log(t);var n=new FormData;return t.length>0&&(console.log("hello"),t.map((function(e){return console.log(e)})),t.map((function(e){return n.append("file",e)}))),n.append("postText",e),console.log(n),P.post("/post/add",n,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return e}))},deletePost:function(){return P.delete("/posts/delete").then((function(e){return e}))},likePost:function(e){return P.put("/post/like",{post:e}).then((function(e){return e}))},dislikePost:function(e){return P.put("/post/dislike",{post:e}).then((function(e){return e}))}},U=function(){return P.get("/allrooms").then((function(e){return e}))},C=function(e,t,n){return P.post("/room/".concat(t,"/create-message-in-room"),{message:e,receiverId:n}).then((function(e){return e}))},T=function(e){return P.get("/room/".concat(e)).then((function(e){return e}))},S=function(e){return P.post("/room/initiate",{userIds:[e],type:"CONSUMER-TO-CONSUMER"}).then((function(e){return e}))},E=function(){return P.get("/friends").then((function(e){return e}))},M=function(e){return P.post("/friends/add",{to:e}).then((function(e){return e}))},L=function(e){return P.post("/friends/cancelquery",{friendId:e}).then((function(e){return e}))},R=function(e){return P.put("/friends/accept",{from:e}).then((function(e){return e}))},B=function(e){return P.put("/friends/reject",{from:e}).then((function(e){return e}))},G=function(e){return P.post("/friends/delete",{friendId:e}).then((function(e){return e}))},H=n(71),Q=n(244),W=Object(Q.a)("https://socnet-backend.herokuapp.com"),V="SET_USER_DATA",Z="SET_AUTH",X="UPLOAD_AVATAR",z="auth/TOGGLE_IS_FETCHING",Y="SET_USER_INFO",q={userInfo:[],isAuth:!1,isFetching:!1},J=function(e,t){return{type:Y,userInfo:e}},K=function(e){return{type:z,isFetching:e}},$=function(e){return{type:Z,isAuth:e}},ee=function(e,t){return function(n){N(e,t).then((function(e){0===e.resultCode&&(n($(!1)),n(function(e,t,n){return{type:V,data:{id:e,email:t,isActivated:n}}}(null,null,null)),n(J([])),W.emit("logout"))}))}},te=function(){return function(e){return y().then((function(t){200===t.status?(e($(!0)),e(J(t.data.user)),console.log(t.data.user.id),W.emit("identity",t.data.user.id)):e($(!1))})).catch((function(){e($(!1))}))}},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case V:return Object(l.a)(Object(l.a)({},e),t.data);case Y:return Object(l.a)(Object(l.a)({},e),{},{userInfo:t.userInfo});case Z:return Object(l.a)(Object(l.a)({},e),{},{isAuth:t.isAuth});case X:return Object(l.a)(Object(l.a)({},e),{},{userInfo:Object(l.a)(Object(l.a)({},e.userInfo),{},{photo_50:t.avatar})});case z:return Object(l.a)(Object(l.a)({},e),{},{isFetching:t.isFetching});default:return e}},se=function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(a.a)(this,n);for(var s=arguments.length,r=new Array(s),i=0;i<s;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).Logout=function(){e.props.logout(e.props.email,e.props.password)},e}return Object(i.a)(n,[{key:"render",value:function(){return Object(h.jsx)(b,Object(l.a)(Object(l.a)({},this.props),{},{data:this.props,Logout:this.Logout}))}}]),n}(d.a.Component),re=Object(j.b)((function(e){return{isAuth:e.login.isAuth,currUserData:e.auth.userInfo}}),{setUserData:te,logout:ee})(se),ae=n(19),ie=n.n(ae),ce=function(e){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("aside",{className:ie.a.main_side,children:Object(h.jsx)("div",{className:ie.a.side,children:Object(h.jsxs)("ul",{className:ie.a.side__list,children:[Object(h.jsx)("li",{className:ie.a["side__list-item"],children:Object(h.jsx)(f.b,{to:"/profile",onClick:e.onProfileClick,className:ie.a["side__list-link"],activeClassName:ie.a.active,children:"Profile"})}),Object(h.jsx)("li",{className:ie.a["side__list-item"],children:Object(h.jsx)(f.b,{to:"/dialogs",className:ie.a["side__list-link"],activeClassName:ie.a.active,children:"Messages"})}),Object(h.jsx)("li",{className:ie.a["side__list-item"],children:Object(h.jsx)("a",{href:"#",className:ie.a["side__list-link"],children:"News"})}),Object(h.jsx)("li",{className:ie.a["side__list-item"],children:Object(h.jsx)("a",{href:"#",className:ie.a["side__list-link"],children:"Music"})}),Object(h.jsx)("li",{className:ie.a["side__list-item"],children:Object(h.jsx)(f.b,{to:"/friends",className:ie.a["side__list-link"],activeClassName:ie.a.active,children:"Friends"})}),Object(h.jsx)("li",{className:ie.a["side__list-item"],children:Object(h.jsx)(f.b,{to:"/users",className:ie.a["side__list-link"],activeClassName:ie.a.active,children:"Users"})})]})})}),Object(h.jsx)("div",{className:ie.a.mobileMenu,children:Object(h.jsxs)("ul",{className:ie.a.mobileMenu__list,children:[Object(h.jsxs)("li",{className:ie.a["mobileMenu-item"],children:[Object(h.jsx)(f.b,{to:"/profile",onClick:e.onProfileClick,className:ie.a["side__list-link"],activeClassName:ie.a.active,children:"Profile"}),Object(h.jsx)(f.b,{to:"/profile",onClick:e.onProfileClick,className:ie.a["footer__list-link"]+" "+ie.a.profile,activeClassName:ie.a.active})]}),Object(h.jsxs)("li",{className:ie.a["mobileMenu-item"],children:[Object(h.jsx)(f.b,{to:"/dialogs",className:ie.a["side__list-link"],activeClassName:ie.a.active,children:"Messages"}),Object(h.jsx)(f.b,{to:"/dialogs",onClick:e.onProfileClick,className:ie.a["footer__list-link"]+" "+ie.a.messages,activeClassName:ie.a.active})]}),Object(h.jsxs)("li",{className:ie.a["mobileMenu-item"],children:[Object(h.jsx)(f.b,{to:"/users",className:ie.a["side__list-link"],activeClassName:ie.a.active,children:"Users"}),Object(h.jsx)(f.b,{to:"/users",className:ie.a["footer__list-link"]+" "+ie.a.users,activeClassName:ie.a.active})]}),Object(h.jsxs)("li",{className:ie.a["mobileMenu-item"],children:[Object(h.jsx)(f.b,{to:"/friends",className:ie.a["side__list-link"],activeClassName:ie.a.active,children:"Friends"}),Object(h.jsx)(f.b,{to:"/friends",className:ie.a["footer__list-link"]+" "+ie.a.friends,activeClassName:ie.a.active})]})]})})]})},oe=n(116),le=n.n(oe),ue=n(33),de=n(8),je=n(46),pe=n.n(je),_e=n(35),fe=n.n(_e),he=(n.p,n.p,function(e){var t,n,s,r;console.log(e.reactionInProgress);var a=e.reactionInProgress.some((function(t){return t===e.id})),i=null===(t=e.likes)||void 0===t?void 0:t.includes(e.userId),c=null===(n=e.dislikes)||void 0===n?void 0:n.includes(e.userId);return Object(h.jsxs)("div",{className:fe.a.post__item,children:[Object(h.jsxs)("div",{className:fe.a.post_user_info,children:[Object(h.jsx)("img",{width:"40",height:"40",className:fe.a.post__item__avatar,src:e.avatar}),Object(h.jsx)("div",{className:fe.a.post_user_name,children:e.userName})]}),Object(h.jsxs)("div",{className:fe.a.post__content,children:[Object(h.jsx)("div",{className:fe.a.post__text,children:null!==e.message?e.message:""}),Object(h.jsx)("div",{className:fe.a.post_thumbnails,children:void 0!==e.thumbnails&&("object"===typeof e.thumbnails?e.thumbnails.map((function(e){return Object(h.jsx)("a",{href:e,children:Object(h.jsx)("img",{src:e,className:fe.a.posts_thumbnails_item,alt:""})})})):Object(h.jsx)("a",{href:e.thumbnails,children:Object(h.jsx)("img",{src:e.thumbnails,style:{width:"150px"},className:fe.a.posts_thumbnails_item,alt:""})}))}),Object(h.jsxs)("div",{className:fe.a.User__response,children:[Object(h.jsx)("div",{className:fe.a.User__response__btn_inner,children:Object(h.jsxs)("button",{className:fe.a.likeButton,disabled:a,onClick:function(){return e.likePost(e.id,e.userId)},children:[Object(h.jsx)("svg",{viewBox:"0 0 24 24",preserveAspectRatio:"xMidYMid meet",focusable:"false",className:i?fe.a.likeButton+" "+fe.a.active:fe.a.likeButton,style:{width:"24px"},children:Object(h.jsx)("g",{className:"style-scope yt-icon",children:Object(h.jsx)("path",{d:"M18.77,11h-4.23l1.52-4.94C16.38,5.03,15.54,4,14.38,4c-0.58,0-1.14,0.24-1.52,0.65L7,11H3v10h4h1h9.43 c1.06,0,1.98-0.67,2.19-1.61l1.34-6C21.23,12.15,20.18,11,18.77,11z M7,20H4v-8h3V20z M19.98,13.17l-1.34,6 C18.54,19.65,18.03,20,17.43,20H8v-8.61l5.6-6.06C13.79,5.12,14.08,5,14.38,5c0.26,0,0.5,0.11,0.63,0.3 c0.07,0.1,0.15,0.26,0.09,0.47l-1.52,4.94L13.18,12h1.35h4.23c0.41,0,0.8,0.17,1.03,0.46C19.92,12.61,20.05,12.86,19.98,13.17z",className:"style-scope yt-icon"})})}),null===(s=e.likes)||void 0===s?void 0:s.length]})}),Object(h.jsx)("div",{className:fe.a.User__response__btn_inner,children:Object(h.jsxs)("button",{className:fe.a.dislikeButton,disabled:a,onClick:function(){return e.dislikePost(e.id,e.userId)},children:[Object(h.jsx)("svg",{viewBox:"0 0 24 24",preserveAspectRatio:"xMidYMid meet",focusable:"false",className:c?fe.a.dislikeButton+" "+fe.a.active:fe.a.dislikeButton,style:{width:"24px"},children:Object(h.jsx)("g",{className:"style-scope yt-icon",children:Object(h.jsx)("path",{d:"M17,4h-1H6.57C5.5,4,4.59,4.67,4.38,5.61l-1.34,6C2.77,12.85,3.82,14,5.23,14h4.23l-1.52,4.94C7.62,19.97,8.46,21,9.62,21 c0.58,0,1.14-0.24,1.52-0.65L17,14h4V4H17z M10.4,19.67C10.21,19.88,9.92,20,9.62,20c-0.26,0-0.5-0.11-0.63-0.3 c-0.07-0.1-0.15-0.26-0.09-0.47l1.52-4.94l0.4-1.29H9.46H5.23c-0.41,0-0.8-0.17-1.03-0.46c-0.12-0.15-0.25-0.4-0.18-0.72l1.34-6 C5.46,5.35,5.97,5,6.57,5H16v8.61L10.4,19.67z M20,13h-3V5h3V13z",className:"style-scope yt-icon"})})}),null===(r=e.dislikes)||void 0===r?void 0:r.length]})})]})]})]})}),be=d.a.memo((function(e){console.log(e);var t=Object(u.useState)(null),n=Object(de.a)(t,2),s=n[0],r=n[1],a=Object(u.useState)([]),i=Object(de.a)(a,2),c=i[0],o=i[1],l=d.a.createRef();console.log(c);var j=c.map((function(e){return Object(h.jsxs)("div",{className:pe.a.postUploadThumbs_item,children:[Object(h.jsx)("img",{src:e.preview,alt:""}),Object(h.jsx)("div",{children:e.name.length>8?e.name.substring(0,8)+"...":e.name})]})}));return Object(h.jsxs)("div",{className:pe.a.add_post_form,onBlur:function(){l.current.rows=e.TextareaRows,e.doLittle()},onFocus:function(){console.log("BIGGGER"),l.current.rows=e.TextareaRows,e.doBigger()},tabIndex:0,children:[Object(h.jsx)("p",{className:pe.a.add_post_title,children:"\u0427\u0442\u043e \u0443 \u0432\u0430\u0441 \u043d\u043e\u0432\u043e\u0433\u043e"}),Object(h.jsx)("textarea",{className:pe.a.post_input,ref:l,value:s,onChange:function(){var e=l.current.value;r(e)}}),Object(h.jsxs)("div",{className:pe.a.add_post_form_footer,children:[Object(h.jsx)("button",{className:pe.a.add_post_button,onClick:function(){console.log(c),e.addNewPost(s,c),e.doBigger(),r(""),o([])},children:"Add"}),Object(h.jsx)("div",{className:pe.a.postUploadThumbs,children:c.length<=5?j:Object(h.jsx)("div",{children:"U may upload only 5 or less files"})}),Object(h.jsx)("input",{accept:".png,.jpg,.svg",className:pe.a.addFileInput,multiple:!0,type:"file",id:"upload",onChange:function(e){if(e.target.files){var t=Array.from(e.target.files).map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})}));console.log(t),o(t)}},hidden:!0}),Object(h.jsx)("label",{className:pe.a.addFile,htmlFor:"upload",children:Object(h.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAABmJLR0QA/wD/AP+gvaeTAAAEC0lEQVRYhe2WW0wcVRiAv5nZC3sBlmUpBXZLgW0pigU0XmgTjW0wBps2+mB8wGg0PjQ+m/hkfajxwdcmkrQmTZomxodqjBGNSdWkkbS7QoVYWsptt1AosGXZhV32Oj4MldvMsgtd8YHv6cz5/3/mmzPnzDmwyy47iwDwxflvxmtdexM7LbOakXtT+o8+eNOpAzhY60ycPNa6f6elVvP91e4xAHGnRTZjV3C76LQCP47+lxrQXqPe/78fwV3B7bIruF00V/F6RAEkCfQClBSCUQcpGcJRCC5CWt6YX2IBqwkkAWJJCISVmlRqY37OgoIIVgPEU2AtAJtF2bhlljdwlOG3W0GvUx5uMij90Tg4CpW6R5gM4CxV2jIwvwjhJTBIsBDfgmBlCZj0KuIquYUFYDWCsByU5ZW2GgLKC9ssynVxBkHNOWiQtItUHyqot7NBl2GiaYYkDfVEIkX/7Uk8PT4O1Jbx0hE3klZytoIZyrNeJJFoHO9NP55eP9El5eg4E1jg7sgMJ15ppKqieE1+IpHi1oAfT88QgYchXj/ZykF3Ze7ymyXMBSN4ev309o+TSKY2xGcCC1z8+jotjVUcf7GeickA3j+H6PlrmFhs5QzceaGLZ1rcnDrxPFZLwYb75Cw49SDE9V4ffw9MkpYz/xNkWaanf5yePj+hYIBEPKaSA7dG+5j97iZOZzFmszLJJVGPKBqJVTfyVNWB7AUvXO7OKKWKIFJkKyO2tMBieB55+cX0pgSuhgjNDVXsKy/b+CuQoW+6j+5RL6cOt1Fe5NhccMsIYDRZ0RtNLIaC6MxBnmiBo81NCFrLW4A99hLSNpkrfT/xcl1rHgWXEUWJIoeZmkMLHG12Z1kj4HZV8utQN0XJcj3keS8udU5wpKlONdZWfYy26mOqsVpnBWPx4VLIMIKuhhe2JZdIjdBQE9b+rBkQRQHnXrvx9KVPXsvbCArSIE6Hfcv1lQ6HYDGb382boMmYVN+4s0UAS4Fxf94WiU5Kr7nWmm/r+3/xXf23rRd1RZqCn71RrBXKis5rj+HjCIKctxGUhLXHodUjAysjt75/NclUMpS3OWiQjMrJdKvIEIktjeZN8GlXI9Nzc1uuH5+dCUcisYs6gGHffaHr9xtDj81uGV9ousphs5lEMbflnE7L3L7n857rONO1nR/Bprx/6WN37R7XD8/WH6rPpc5zZ2B4bGqi/fw7nw/meLDPjd5vrz188tXnBkPRSGuF3WHfbFdJp2W8g3fuTs3Onv7y7bMegLwKAty48ttwXVvTz9PBucNGvc5RaLIY1I5b47MzYc/gwB/3gw/e6uw4630UyusnXs+Hlz9tNxcY37OazPskQSwGSMnp+XA04l+Kxr8613Gma33NP/rsR3nFrkOLAAAAAElFTkSuQmCC",alt:""})})]})]})})),Oe=n(22),ge=(n(321),"CHANGE-TEXT-POST"),me="ADD-POST",ve="ON-BLURE",xe="ON-FOCUS",Pe="SET_USER_PROFILE",we="UPLOAD_AVATAR",Ne="TOGGLE_IS_FETCHING",ye="SET_USER_STATUS",De="SET_POSTS",ke="LIKE_POST",Fe="DISLIKE_POST",Ae="TOGGLE_IS_REACTION_PROGRESS",Ie={ProfileData:[],PostsData:[],status:"",NewPostTextVal:"",TextareaRows:5,isFetching:!0,reactionInProgress:[]},Ue=function(e){return{type:Ne,isFetching:e}},Ce=function(e,t,n){return{type:ke,likes:e,dislikes:t,postId:n}},Te=function(e,t,n){return{type:Fe,likes:e,dislikes:t,postId:n}},Se=function(e,t){return{type:me,postText:e,postThumbnails:t}},Ee=function(e,t){return{type:Ae,isProgressing:e,postId:t}},Me=function(e){return function(){var t=Object(m.a)(g.a.mark((function t(n){var s;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I.getPosts(e);case 2:s=t.sent,n((r=s.data.posts,{type:De,posts:r}));case 4:case"end":return t.stop()}var r}),t)})));return function(e){return t.apply(this,arguments)}}()},Le=function(e){return{type:Pe,profile:e}},Re=function(e){return{type:ye,status:e}},Be=function(e){return function(t){t(Ue(!0)),k(e).then((function(n){console.log(n.data),t(Le(n.data)),t(Me(e)),t(Ue(!1))}))}},Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case me:var n={postText:t.postText,postThumbnails:t.postThumbnails,likes:[],dislikes:[]};return Object(l.a)(Object(l.a)({},e),{},{PostsData:[n].concat(Object(Oe.a)(e.PostsData))});case De:return Object(l.a)(Object(l.a)({},e),{},{PostsData:t.posts.reverse()});case ge:return Object(l.a)(Object(l.a)({},e),{},{NewPostTextVal:t.newText});case Ne:return Object(l.a)(Object(l.a)({},e),{},{isFetching:t.isFetching});case ve:return Object(l.a)(Object(l.a)({},e),{},{TextareaRows:2});case xe:return Object(l.a)(Object(l.a)({},e),{},{TextareaRows:5});case Pe:return Object(l.a)(Object(l.a)({},e),{},{ProfileData:t.profile});case ye:return Object(l.a)(Object(l.a)({},e),{},{status:t.status});case we:return Object(l.a)(Object(l.a)({},e),{},{ProfileData:Object(l.a)(Object(l.a)({},e.ProfileData),{},{photo_50:t.avatar})});case ke:var s=Object(Oe.a)(e.PostsData),r=s.map((function(e){return e._id===t.postId&&(e.likes=t.likes,e.dislikes=t.dislikes),e}));return Object(l.a)(Object(l.a)({},e),{},{PostsData:r});case Fe:var a=Object(Oe.a)(e.PostsData),i=a.map((function(e){return e._id===t.postId&&(e.likes=t.likes,e.dislikes=t.dislikes),e}));return Object(l.a)(Object(l.a)({},e),{},{PostsData:i});case Ae:return Object(l.a)(Object(l.a)({},e),{},{reactionInProgress:t.isProgressing?[].concat(Object(Oe.a)(e.reactionInProgress),[t.postId]):[e.reactionInProgress.filter((function(e){return e!==t.postId}))]});default:return e}},He=d.a.memo((function(e){console.log("--------------------RENDER--------------------");var t="";e.PostsData.length<=0&&(t="There are no posts");var n=e.PostsData.map((function(t){return Object(h.jsx)(he,{reactionInProgress:e.reactionInProgress,likePost:e.likePost,dislikePost:e.dislikePost,userId:e.userId,avatar:e.avatar,thumbnails:t.postThumbnails,message:t.postText,likes:t.likes,dislikes:t.dislikes,id:t._id,userName:e.userName})})),s=e.ProfileId===e.userId;return Object(h.jsxs)("div",{className:pe.a.posts__wrapper,children:[s&&Object(h.jsx)(be,{doBigger:e.doBigger,doLittle:e.doLittle,addNewPost:e.addNewPost,TextareaRows:e.TextareaRows}),Object(h.jsx)("h1",{className:pe.a.posts__title,children:"Posts"}),Object(h.jsxs)("div",{className:pe.a.posts,children:[n," ",t]})]})})),Qe=n(48),We=n.n(Qe),Ve=n.p+"static/media/edit.0f46e272.png",Ze=Object(j.b)((function(e){return{TextareaRows:e.ProfilePage.TextareaRows,PostsData:e.ProfilePage.PostsData,NewPostTextVal:e.ProfilePage.NewPostTextVal,ProfileId:e.ProfilePage.ProfileData.user,reactionInProgress:e.ProfilePage.reactionInProgress,userId:e.auth.userInfo.id}}),(function(e,t){return{dispatch:e,likePost:function(t,n){return e(function(e,t){return function(){var t=Object(m.a)(g.a.mark((function t(n){var s;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(Ee(!0,e)),t.next=4,I.likePost(e);case 4:s=t.sent,n(Ce(s.data.likes,s.data.dislikes,e)),n(Ee(!1,e)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(t))},dislikePost:function(t,n){return e(function(e,t){return function(){var t=Object(m.a)(g.a.mark((function t(n){var s;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(Ee(!0,e)),t.next=4,I.dislikePost(e);case 4:s=t.sent,n(Te(s.data.likes,s.data.dislikes,e)),n(Ee(!1,e)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(t))},addNewPost:function(t,n){var s,r;e((s=t,r=n,function(){var e=Object(m.a)(g.a.mark((function e(t,n){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.addPost(s,r);case 2:a=e.sent,console.log(a.data.addPost.postText),t(Se(a.data.addPost.postText,a.data.addPost.postThumbnails)),t(Me(n().auth.userInfo.id));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()))},onPostChange:function(t){e(function(e){return{type:ge,newText:e}}(t))},doBigger:function(t){e({type:ve})},doLittle:function(t){e({type:xe})}}}))(He),Xe=Ze,ze=n(99),Ye=n.n(ze),qe=function(e){var t=Object(u.useState)(""),n=Object(de.a)(t,2),s=n[0],r=n[1],a=Object(u.useState)(e.status),i=Object(de.a)(a,2),c=i[0],o=i[1];Object(u.useEffect)((function(){o(e.status)}),[e.status]);return Object(h.jsx)(h.Fragment,{children:e.isProfileEqsUser?Object(h.jsxs)("div",{className:Ye.a.own_status_container,children:[!s&&Object(h.jsx)("div",{onClick:function(){r(!0)},className:Ye.a.own_status,children:Object(h.jsx)("span",{children:c||Object(h.jsx)("div",{children:"\u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441"})})}),s&&Object(h.jsx)("div",{children:Object(h.jsx)("div",{className:Ye.a.edit_status_container,children:Object(h.jsx)("div",{className:Ye.a.edit_status,children:Object(h.jsx)("input",{onBlur:function(){r(!1),e.updateStatus(c)},onChange:function(e){o(e.target.value)},autoFocus:!0,type:"text",value:c})})})})]}):Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("div",{className:Ye.a.status,children:Object(h.jsx)("span",{children:e.status?e.status:Object(h.jsx)("div",{children:"\u0441\u0442\u0430\u0442\u0443\u0441 \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d"})})})})})},Je=n(117),Ke=n.n(Je),$e=function(e){var t=e.active,n=e.setActive,s=e.children;return console.log(t),Object(h.jsx)("div",{className:t?Ke.a.modal+" "+Ke.a.active:Ke.a.modal,onClick:function(){n(!1)},children:Object(h.jsx)("div",{className:Ke.a.modal_content,onClick:function(e){return e.stopPropagation()},children:s})})},et=n(57),tt=n.n(et),nt=n(166),st=function(e){var t=Object(u.useState)([]),n=Object(de.a)(t,2),s=n[0],r=n[1];Object(u.useEffect)((function(){!1===e.active&&(console.log(e.active),r([]))}),[e.active]);var a=Object(nt.a)({accept:"image/*",onDrop:function(e){r(e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})})))}}),i=a.getRootProps,c=a.getInputProps,o=a.isDragAccept,d=a.isDragReject,j=s.map((function(e){return Object(h.jsx)("div",{children:Object(h.jsx)("div",{children:Object(h.jsx)("img",{src:e.preview})})},e.name)}));return Object(u.useEffect)((function(){s.forEach((function(e){return URL.revokeObjectURL(e.preview)}))}),[s]),Object(h.jsxs)("div",{className:tt.a.uploadAvatar_container,children:[Object(h.jsx)("h1",{children:"Put your photo here"}),Object(h.jsxs)("div",Object(l.a)(Object(l.a)({className:o||d?o?tt.a.dropZone_field+" "+tt.a.dropAccept:tt.a.dropZone_field+" "+tt.a.dropReject:tt.a.dropZone_field},i()),{},{children:[Object(h.jsx)("input",Object(l.a)({},c())),Object(h.jsx)("p",{children:"Drag 'n' drop some files here, or click to select files"})]})),Object(h.jsxs)("div",{className:tt.a.avatarPreview,children:[Object(h.jsxs)("div",{className:tt.a.largeAvatarPreview,children:[Object(h.jsx)("p",{children:"big avatar"}),Object(h.jsx)("div",{children:s.length>0?j:Object(h.jsx)("img",{src:e.currentAvatar,alt:""})})]}),Object(h.jsxs)("div",{className:tt.a.littleAvatarPreview,children:[Object(h.jsx)("p",{children:"little avatar"}),Object(h.jsx)("div",{children:s.length>0?j:Object(h.jsx)("img",{src:e.currentAvatar,alt:""})})]})]}),Object(h.jsx)("div",{className:tt.a.imageActions,children:Object(h.jsx)("button",{className:tt.a.applyNewAvatarBtn,disabled:s.length<=0,onClick:function(){e.uploadAvatar(s[0]),r([])},children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c"})})]})},rt=n.p+"static/media/Preloader.9ed898b1.svg",at=n(170),it=n.n(at),ct=function(e){return Object(h.jsx)("div",{className:it.a.preloaderInner,children:Object(h.jsx)("div",{className:it.a.preloader,children:e.isFetching?Object(h.jsx)("img",{src:rt}):null})})},ot=function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(h.jsx)(h.Fragment,{children:this.props.isFetching?Object(h.jsx)(ct,{isFetching:this.props.isFetching}):Object(h.jsx)(st,{uploadAvatar:this.props.uploadAvatar,currentAvatar:this.props.currentAvatar,isFetching:this.props.isFetching,active:this.props.active})})}}]),n}(d.a.Component),lt=Object(j.b)((function(e){return{currentAvatar:e.ProfilePage.ProfileData.photo_50,isFetching:e.auth.isFetching}}),{uploadAvatar:function(e){return function(t){t(K(!0)),I.uploadAvatar(e).then((function(e){200===e.status&&(t(function(e){return{type:X,avatar:e}}(e.data.avatar)),t(K(!1)))}))}}})(ot),ut=function(e){var t=Object(u.useState)(!1),n=Object(de.a)(t,2),s=n[0],r=n[1],a=e.ProfileData,i=e.ProfileId===e.UserId;return Object(h.jsxs)("div",{className:We.a.profile__wrapper,children:[Object(h.jsx)($e,{active:s,setActive:r,children:Object(h.jsx)(lt,{active:s,currentAvatar:e.photo_50})}),Object(h.jsxs)("div",{className:We.a.profile_data_wrapper,children:[Object(h.jsx)("div",{className:We.a.profile_avatar,children:Object(h.jsxs)("div",{className:We.a.profile_avatar_wrapper,children:[i&&Object(h.jsx)("div",{className:We.a.avatar_image_cover,onClick:function(){return r(!0)},children:Object(h.jsx)("img",{className:We.a.edit_avatar_image,src:Ve,alt:""})}),Object(h.jsx)("img",{src:a.photo_50,className:We.a.avatar_img,alt:"photo"})]})}),Object(h.jsxs)("div",{className:We.a.profile_info,children:[i&&Object(h.jsx)("div",{className:We.a.edit_info_btn,children:Object(h.jsx)(f.b,{to:"/settings",children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})}),Object(h.jsx)("h1",{className:We.a.profile_name,children:a.first_name+" "+a.last_name}),Object(h.jsx)(qe,{status:e.status,updateStatus:e.updateStatus,isProfileEqsUser:i}),Object(h.jsxs)("div",{className:We.a.profile_age,children:["Age: ",a.age]}),Object(h.jsxs)("div",{className:We.a.profile_gender,children:["Gender: ",a.gender]}),Object(h.jsxs)("div",{className:We.a.description,children:[Object(h.jsx)("p",{children:"About me:"}),a.description]})]})]}),Object(h.jsx)(Xe,{avatar:a.photo_50,userName:a.first_name+" "+a.last_name,postsData:e.postsData,NewPostTextVal:e.NewPostTextVal,TextareaRows:e.TextareaRows,dispatch:e.dispatch})]})},dt=n(27),jt=n(139),pt=function(e){return{isAuth:e.auth.isAuth}},_t=function(e){var t=function(t){Object(c.a)(s,t);var n=Object(o.a)(s);function s(){return Object(a.a)(this,s),n.apply(this,arguments)}return Object(i.a)(s,[{key:"render",value:function(){return!1===this.props.isAuth?Object(h.jsx)(jt.a,{to:"/login"}):Object(h.jsx)(e,Object(l.a)({},this.props))}}]),s}(d.a.Component);return Object(j.b)(pt)(t)},ft=function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userId;e||(e=this.props.logginedUserId)||this.props.history.push("/login"),this.props.setUserProfile(e),this.props.getUserStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t){e.match.params.userId!=this.props.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return Object(h.jsx)(h.Fragment,{children:this.props.isFetching?Object(h.jsx)(ct,{isFetching:this.props.isFetching}):Object(h.jsx)(ut,Object(l.a)(Object(l.a)({},this.props),{},{ProfileData:this.props.ProfileData,status:this.props.status,updateStatus:this.props.updateUserStatus,ProfileId:this.props.ProfileId,UserId:this.props.logginedUserId}))})}}]),n}(d.a.Component),ht=Object(dt.d)(Object(j.b)((function(e){return{ProfileData:e.ProfilePage.ProfileData,status:e.ProfilePage.status,ProfileId:e.ProfilePage.ProfileData.user,logginedUserId:e.auth.userInfo.id,userId:e.auth.id,isFetching:e.ProfilePage.isFetching}}),{getUserStatus:function(e){return function(t){I.getUserStatus(e).then((function(e){console.log(e.data.status),t(Re(e.data.status))}))}},updateUserStatus:function(e){return function(t){I.updateUserStatus(e).then((function(n){0===n.data.resultCode&&t(Re(e))}))}},acceptUserProfile:Le,setUserProfile:Be,setAuth:function(e){return{type:"SET_AUTH",isAuth:e}}}),ue.f)(ft),bt="ADD-MESSAGE",Ot="CHANGE-MESSAGE-TEXT",gt="messages/SET_DIALOGS_DATA",mt="messages/TOGGLE_IS_FETCHING",vt="messages/SET_CURRENT_DIALOG",xt="TOGGLE_IS_FETCHING_CONVERSATION",Pt="messages/SET_MESSAGES_DATA",wt="ADD_DIALOG",Nt={dialogsData:[],rooms:[],users:[],messagesData:[],newMessageText:"",isFetching:!0,conversationIsFetching:!0,currentDialog:null},yt=function(e,t){return{type:bt,newMessageText:e,sentBy:t}},Dt=function(e){return{type:mt,isFetching:e}},kt=function(e){return{type:xt,convIsFetching:e}},Ft=function(){return function(){var e=Object(m.a)(g.a.mark((function e(t,n){var s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(Dt(!0)),e.next=4,U();case 4:s=e.sent,console.log(s.data),t((n=s.data,{type:gt,dialogsData:n})),t(Dt(!1)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}var n}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}()},At=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case bt:if(e.newMessageText.length>=1||t.newMessageText.length>=1){var n={sentBy:t.sentBy,createdAt:t.createdAt,message:t.newMessageText};return Object(l.a)(Object(l.a)({},e),{},{messagesData:[].concat(Object(Oe.a)(e.messagesData),[n]),newMessageText:""})}case mt:return Object(l.a)(Object(l.a)({},e),{},{isFetching:t.isFetching});case Ot:return Object(l.a)(Object(l.a)({},e),{},{newMessageText:t.newMessText});case gt:return Object(l.a)(Object(l.a)({},e),{},{dialogsData:Object(l.a)(Object(l.a)({},e.dialogsData),{},{rooms:t.dialogsData.rooms,users:t.dialogsData.allUsers})});case xt:return Object(l.a)(Object(l.a)({},e),{},{conversationIsFetching:t.convIsFetching});case vt:return Object(l.a)(Object(l.a)({},e),{},{currentDialog:t.currentDialog});case Pt:var s=[];return t.data.map((function(e){return s.push({message:e.message,sentBy:e.postedByUser,createdAt:e.createdAt})})),Object(l.a)(Object(l.a)({},e),{},{messagesData:s});case wt:return Object(l.a)(Object(l.a)({},e),{},{dialogsData:Object(l.a)(Object(l.a)({},e.dialogsData),{},{rooms:[].concat(Object(Oe.a)(e.dialogsData.rooms),[t.room]),users:[].concat(Object(Oe.a)(e.dialogsData.users),[t.user])})});default:return e}},It=n(34),Ut=n.n(It),Ct=function(e){if(e){var t=[],n=e.users.map((function(e){return e}));return n.map((function(e){return e})),n.map((function(e){return t.push.apply(t,Object(Oe.a)(e))})),e.rooms.map((function(e){return{users:e.userIds.map((function(e){return e})).map((function(e){return t.find((function(t){return t.user===e}))})),room:e._id}}))}return{}},Tt=function(e){var t=Object(u.useState)(!1),n=Object(de.a)(t,2),s=n[0],r=n[1],a=e.usersList.map((function(t){return e.currentUser!==t.user&&Object(h.jsxs)("div",{className:Ut.a.usersList__item,onClick:function(){e.createNewDialog(t.user).then((function(t){t?e.setCurrentDialog(t.data.chatRoomId):alert("Error")}))},children:[Object(h.jsx)("img",{src:t.photo_50,alt:"avatar",className:Ut.a.usersList__item__image}),Object(h.jsx)("div",{children:t.first_name+" "+t.last_name})]})}));return Object(h.jsxs)("div",{onBlur:function(){return r(!1)},tabIndex:"1",className:Ut.a.createNewDialogWrapper,children:[Object(h.jsx)("div",{className:Ut.a.createNewDialog,onClick:function(){return r(!s)},children:"+"}),s&&Object(h.jsxs)("div",{className:Ut.a.usersList,children:["Chat with:",a]})]})},St=n(32),Et=function(e){var t=Ct(e.dialogsData);console.log(e.usersList);var n=t.map((function(t){var n=t.users.find((function(t){return t.user!==e.currentUser}));return!!e.usersList.find((function(e){return e.user===n.user}))&&Object(h.jsx)(St.c,{onClick:function(){e.setCurrentDialog(t.room)},name:n.first_name+" "+n.last_name,children:Object(h.jsx)(St.a,{src:n.photo_50,size:"md",alt:"f"})})}));return Object(h.jsx)("div",{children:Object(h.jsxs)(St.e,{children:[n,e.deviceWidth<768&&Object(h.jsx)(Tt,{setCurrentDialog:e.setCurrentDialog,dialogs:Ct(e.dialogsData),usersList:e.usersList,currentUser:e.currentUser,createNewDialog:e.createNewDialog})]})})},Mt=n(245),Lt=function(e){var t=Object(u.useRef)(),n=Object(u.useState)(null),s=Object(de.a)(n,2),r=s[0],a=s[1];console.log(e);var i=e.currentRoom.userIds.find((function(t){return t!==e.currentUser})),c=e.usersList.find((function(e){return e.user===i})),o=e.onlineUsersList.includes(i);Object(u.useEffect)((function(){W.on("getMessage",(function(e){a(e)}))}),[W]),Object(u.useEffect)((function(){e.setMessagesData(e.currentRoom._id,"getMessage"),a("")}),[r]),Object(u.useEffect)((function(){e.setMessagesData(e.currentRoom._id,"loadMessages")}),[e.currentRoom]);var l=e.messagesData.map((function(t,n){var s=t.sentBy.first_name+" "+t.sentBy.last_name,r=t.sentBy.user===e.currentUser,a=t.message,i=t.sentBy.photo_50,c=Object(Mt.a)(t.createdAt);return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(St.h,{direction:r?"incoming":"outgoing",sender:s,children:[Object(h.jsx)(St.a,{src:i,name:"avatar"}),Object(h.jsx)(St.h.Messages,{children:Object(h.jsx)(St.g,{model:{message:a}},n)}),Object(h.jsx)(St.h.Footer,{children:c})]})})}));return Object(u.useEffect)((function(){var e;null===t||void 0===t||null===(e=t.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[l]),Object(h.jsxs)(St.b,{children:[e.deviceWidth<768?Object(h.jsxs)(St.d,{children:[Object(h.jsx)(St.d.Back,{onClick:function(){return e.setCurrentDialog(!1)}}),Object(h.jsx)(St.a,{src:c.photo_50,name:"Joe",status:o?"available":"unavailable"}),Object(h.jsx)(St.d.Content,{userName:c.first_name+" "+c.last_name})]}):Object(h.jsxs)(St.d,{children:[Object(h.jsx)(St.d,{}),Object(h.jsx)(St.a,{src:c.photo_50,name:"Joe",status:o?"available":"unavailable"}),Object(h.jsx)(St.d.Content,{userName:c.first_name+" "+c.last_name})]}),Object(h.jsx)(St.j,{children:l}),Object(h.jsx)(St.i,{onSend:function(t){var n=e.currentRoom.userIds.find((function(t){return t!==e.currentUser}));e.sendMessage(t,e.currentRoom._id,n),W.emit("sendMessage",{receiverId:n,textContent:t})},attachButton:!1,placeholder:"Type message here"})]})};n(324);function Rt(){var e=window;return{width:e.innerWidth,height:e.innerHeight}}var Bt=function(e){var t=Object(u.useState)(Rt()),n=Object(de.a)(t,2),s=n[0],r=n[1],a=e.dialogsData.rooms.find((function(t){return t._id===e.currentRoom}));return Object(u.useEffect)((function(){function e(){r(Rt())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),console.log(s.width<768),Object(h.jsxs)("div",{className:Ut.a.dialogs_wrapper,children:[Object(h.jsxs)(St.f,{children:[!e.currentRoom&&s.width<768&&Object(h.jsx)(Et,{dialogsData:e.dialogsData,setCurrentDialog:e.setCurrentDialog,currentUser:e.currentUser,deviceWidth:s.width,usersList:e.usersList,createNewDialog:e.createNewDialog}),s.width>=768&&Object(h.jsx)(Et,{dialogsData:e.dialogsData,setCurrentDialog:e.setCurrentDialog,currentUser:e.currentUser,usersList:e.usersList,createNewDialog:e.createNewDialog}),!e.currentRoom&&s.width>=768&&Object(h.jsx)("div",{children:"Choose a conversation to communicate"}),e.currentRoom&&Object(h.jsx)(Lt,{addMessage:e.addMessage,convIsFetching:e.convIsFetching,currentRoom:a,currentUser:e.currentUser,setCurrentDialog:e.setCurrentDialog,messagesData:e.messagesData,sendMessage:e.sendMessage,usersList:e.usersList,deviceWidth:s.width,onlineUsersList:e.onlineUsersList,setMessagesData:e.setMessagesData})]}),s.width>=768&&Object(h.jsx)(Tt,{setCurrentDialog:e.setCurrentDialog,dialogs:Ct(e.dialogsData),usersList:e.usersList,currentUser:e.currentUser,createNewDialog:e.createNewDialog})]})},Gt="SET_USERS",Ht="IS_TOGGLE_FETCHING",Qt="SET_ONLINE_USESR",Wt={users:[],onlineUsers:[],isFetching:!1},Vt=function(e){return{type:Ht,isFetching:e}},Zt=function(e){return{type:Qt,onlineUsers:e}},Xt=function(){return function(e){e(Vt(!0)),D().then((function(t){e(Vt(!1)),e({type:Gt,users:t})}))}},zt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Gt:return Object(l.a)(Object(l.a)({},e),{},{users:t.users});case Ht:return Object(l.a)(Object(l.a)({},e),{},{isFetching:t.isFetching});case Qt:return Object(l.a)(Object(l.a)({},e),{},{onlineUsers:t.onlineUsers});default:return e}},Yt=function(e){var t=function(e){Object(c.a)(s,e);var t=Object(o.a)(s);function s(){return Object(a.a)(this,s),t.apply(this,arguments)}return Object(i.a)(s,[{key:"render",value:function(){return Object(h.jsx)(n,Object(l.a)({},this.props))}}]),s}(d.a.Component),n=function(t){return console.log("COMPONENT RENDER"),Object(u.useEffect)((function(){t.currentUser&&W.emit("identity",t.currentUser)}),[]),Object(u.useEffect)((function(){W.emit("getOnlineUsers")}),[]),Object(u.useEffect)((function(){W.on("usersChanged",(function(e){W.emit("checkMe",t.currentUser),t.setOnlineUsers(e)}))}),[W]),Object(u.useEffect)((function(){W.emit("checkMe",t.currentUser)}),[]),Object(u.useEffect)((function(){W.on("checkedData",(function(e){e||W.emit("identity",t.currentUser)}))}),[]),Object(h.jsx)(e,Object(l.a)({},t))};return Object(j.b)((function(e){return{currentUser:e.auth.userInfo.id,onlineUsers:e.usersPage.onlineUsers}}),{setOnlineUsers:Zt})(t)},qt="SET_FRIENDS",Jt="ADD_TO_FRIENDS",Kt="ACCEPT_FRIENDS_QUERY",$t="REJECT_FRIENDS_QUERY",en="DELETE_FRIEND",tn="CANCEL_FRIEND_QUERY",nn={friends:[],sentFlQueries:[],waitingFlAccept:[]},sn=function(e){return{type:Jt,to:e}},rn=function(e){return{type:tn,friendId:e}},an=function(e){return{type:$t,friendId:e}},cn=function(e){return{type:en,friendId:e}},on=function(){return function(){var e=Object(m.a)(g.a.mark((function e(t){var n,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E();case 3:n=e.sent,s=n.data,t((r=s.friends,a=s.waitingFlAccept,i=s.sentFlQueries,{type:qt,friends:r,waitingFlAccept:a,sentFlQueries:i})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}var r,a,i}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},ln=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case qt:return Object(l.a)(Object(l.a)({},e),{},{friends:t.friends,sentFlQueries:t.sentFlQueries,waitingFlAccept:t.waitingFlAccept});case Jt:return Object(l.a)(Object(l.a)({},e),{},{sentFlQueries:[].concat(Object(Oe.a)(e.sentFlQueries),[t.to])});case tn:return Object(l.a)(Object(l.a)({},e),{},{sentFlQueries:e.sentFlQueries.filter((function(e){return e!==t.friendId}))});case Kt:return Object(l.a)(Object(l.a)({},e),{},{friends:[].concat(Object(Oe.a)(e.friends),[t.sender]),waitingFlAccept:e.waitingFlAccept.filter((function(e){return e!==t.sender.user}))});case $t:return Object(l.a)(Object(l.a)({},e),{},{waitingFlAccept:e.waitingFlAccept.filter((function(e){return e!==t.friendId}))});case en:return Object(l.a)(Object(l.a)({},e),{},{friends:e.friends.filter((function(e){return e.user!==t.friendId}))});default:return e}},un=function(e){var t=function(e){Object(c.a)(s,e);var t=Object(o.a)(s);function s(){return Object(a.a)(this,s),t.apply(this,arguments)}return Object(i.a)(s,[{key:"render",value:function(){return Object(h.jsx)(n,Object(l.a)({},this.props))}}]),s}(d.a.Component),n=function(t){return Object(u.useEffect)((function(){t.setFriends()}),[]),Object(h.jsx)(e,Object(l.a)({},t))};return Object(j.b)((function(e){return{friends:e.friendsPage.friends}}),{setFriends:on})(t)},dn=function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.setDialogsData(),this.props.setUsers()}},{key:"render",value:function(){return this.props.isFetching?Object(h.jsx)("div",{children:"\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430"}):Object(h.jsx)(Bt,Object(l.a)({},this.props))}}]),n}(d.a.Component),jn=Object(dt.d)(Object(j.b)((function(e){return{dialogsData:e.messagesPage.dialogsData,messagesData:e.messagesPage.messagesData,newMessageText:e.messagesPage.newMessageText,isFetching:e.messagesPage.isFetching,convIsFetching:e.messagesPage.conversationIsFetching,currentUser:e.auth.userInfo.id,friends:e.friendsPage.friends,setMessagesData:e.messagesPage.setMessagesData,currentRoom:e.messagesPage.currentDialog,usersList:e.friendsPage.friends,onlineUsersList:e.usersPage.onlineUsers}}),{addMessage:yt,ChangeNewMessage:function(e){return{type:Ot,newMessText:e}},setDialogsData:Ft,setMessagesData:function(e,t){return function(){var n=Object(m.a)(g.a.mark((function n(s,r){var a;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,a=function(){var t=Object(m.a)(g.a.mark((function t(){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T(e);case 2:n=t.sent,console.log(n),s((r=n.data.conversation,{type:Pt,data:r}));case 5:case"end":return t.stop()}var r}),t)})));return function(){return t.apply(this,arguments)}}(),"loadMessages"!==t){n.next=9;break}return s(kt(!0)),n.next=6,a();case 6:s(kt(!1)),n.next=12;break;case 9:if("getMessage"!==t){n.next=12;break}return n.next=12,a();case 12:n.next=17;break;case 14:n.prev=14,n.t0=n.catch(0),console.log(n.t0);case 17:case"end":return n.stop()}}),n,null,[[0,14]])})));return function(e,t){return n.apply(this,arguments)}}()},setOnlineUsers:Zt,setCurrentDialog:function(e){return{type:vt,currentDialog:e}},sendMessage:function(e,t,n){return function(){var s=Object(m.a)(g.a.mark((function s(r){var a;return g.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(s.prev=0,!(e.length>0)){s.next=6;break}return s.next=4,C(e,t,n);case 4:a=s.sent,r(yt(a.data.message,a.data.postedByUser));case 6:s.next=11;break;case 8:s.prev=8,s.t0=s.catch(0),console.log(s.t0);case 11:case"end":return s.stop()}}),s,null,[[0,8]])})));return function(e){return s.apply(this,arguments)}}()},setUsers:Xt,createNewDialog:function(e){return function(){var t=Object(m.a)(g.a.mark((function t(n,s){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e===s().auth.userInfo.id){t.next=4;break}return t.next=3,S(e).then((function(e){return n(Ft()),e}));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),Yt,un,_t)(dn),pn=n(73),_n=n.n(pn),fn=n(39),hn=n.n(fn),bn=function(e){var t=e.friends.some((function(t){return t.user===e.id})),n=e.isIncomingRequest||e.isOutComigRequers;console.log(n);var s=e.currentUser===e.id;return Object(h.jsx)("div",{children:!s&&Object(h.jsxs)("div",{className:hn.a.Friend,children:[Object(h.jsx)(f.b,{to:"/profile/"+e.id,className:hn.a.friend__avatar,children:Object(h.jsx)("img",{width:"60",src:e.avatar,alt:""})}),Object(h.jsxs)("div",{className:hn.a.friend__name,children:[e.first_name,Object(h.jsx)("span",{children:"    "}),e.last_name]}),Object(h.jsx)("div",{className:hn.a.isOnline,children:e.online?Object(h.jsx)("div",{className:hn.a.online,children:"Online"}):Object(h.jsx)("div",{className:hn.a.ofline,children:"offline"})}),Object(h.jsx)("div",{className:hn.a.addToFriendsButtonInner,children:n?e.isOutComigRequers?Object(h.jsx)("button",{onClick:function(){return e.cancelFriendQuery(e.id)},children:"cancel request"}):Object(h.jsxs)("div",{children:[Object(h.jsx)("button",{onClick:function(){return e.acceptFriendQuery(e.id)},children:"Accept"}),Object(h.jsx)("button",{style:{background:"red"},onClick:function(){return e.rejectFriendQuery(e.id)},children:"Reject"})]}):t?Object(h.jsx)("button",{style:{background:"red"},className:hn.a.deleteFromFriend,onClick:function(){return e.deleteFriend(e.id)},children:"Delete from friends"}):Object(h.jsx)("button",{className:hn.a.addToFriends,onClick:function(){return e.addFriend(e.id)},children:"Add to friends"})})]})})},On=function(e){var t=Object(u.useState)(""),n=Object(de.a)(t,2),s=n[0],r=n[1];return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("input",{type:"text",placeholder:"search users",value:s,className:_n.a.searchFilterInput,onChange:function(e){return r(e.target.value)}}),Object(h.jsx)("div",{className:_n.a.usersContainer,children:e.users.filter((function(e){var t="".concat(e.first_name," ").concat(e.last_name);return s?t.toLowerCase().includes(s.toLowerCase())?e:void 0:e})).map((function(t){return Object(h.jsx)(bn,{className:_n.a.friend__item,online:e.onlineUsers.includes(t.user),id:t.user,addFriend:e.addFriend,cancelFriendQuery:e.cancelFriendQuery,acceptFriendQuery:e.acceptFriendQuery,rejectFriendQuery:e.rejectFriendQuery,deleteFriend:e.deleteFriend,currentUser:e.currentUser,isIncomingRequest:e.waitingFlAccept.includes(t.user),isOutComigRequers:e.sentFlQueries.includes(t.user),friends:e.friends,isFriend:e.friends.some((function(e){return console.log(e.user)})),first_name:t.first_name,last_name:t.last_name,avatar:t.photo_50})}))})]})},gn=function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(a.a)(this,n);for(var s=arguments.length,r=new Array(s),i=0;i<s;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).Test=function(){e.props.setUsers()},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.Test()}},{key:"render",value:function(){return Object(h.jsx)(h.Fragment,{children:this.props.isFetching?Object(h.jsx)(ct,{isFetching:this.props.isFetching}):Object(h.jsx)(On,Object(l.a)({},this.props))})}}]),n}(d.a.Component),mn=Object(dt.d)(Object(j.b)((function(e){return{users:e.usersPage.users,isFetching:e.usersPage.isFetching,onlineUsers:e.usersPage.onlineUsers,waitingFlAccept:e.friendsPage.waitingFlAccept,sentFlQueries:e.friendsPage.sentFlQueries,currentUser:e.auth.userInfo.id,friends:e.friendsPage.friends}}),{setUsers:Xt,toggleIsFetching:Vt,setOnlineUsers:Zt,cancelFriendQuery:function(e){return function(){var t=Object(m.a)(g.a.mark((function t(n){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,L(e);case 3:t.sent,n(rn(e)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},acceptFriendQuery:function(e){return function(){var t=Object(m.a)(g.a.mark((function t(n){var s;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,R(e);case 3:s=t.sent,console.log(s.data.sender),n((r=s.data.sender,{type:Kt,sender:r})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}var r}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},rejectFriendQuery:function(e){return function(){var t=Object(m.a)(g.a.mark((function t(n){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B(e);case 3:t.sent,n(an(e)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},deleteFriend:function(e){return function(){var t=Object(m.a)(g.a.mark((function t(n){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,G(e);case 3:t.sent,n(cn(e)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},addFriend:function(e){return function(){var t=Object(m.a)(g.a.mark((function t(n){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,M(e);case 3:t.sent,n(sn(e)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}}),un,Yt)(gn),vn=function(e){return Object(h.jsxs)("div",{className:hn.a.Friend,children:[Object(h.jsx)(f.b,{to:"/profile/"+e.id,className:hn.a.friend__avatar,children:Object(h.jsx)("img",{width:"60",src:e.avatar,alt:""})}),Object(h.jsxs)("div",{className:hn.a.friend__name,children:[e.first_name,Object(h.jsx)("span",{children:"    "}),e.last_name]}),Object(h.jsx)("div",{className:hn.a.isOnline,children:e.online?Object(h.jsx)("div",{className:hn.a.online,children:"Online"}):Object(h.jsx)("div",{className:hn.a.ofline,children:"offline"})})]})},xn=function(e){return Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:_n.a.onlineFriends,children:[Object(h.jsx)("h1",{children:"Online friends"}),(t=e.friends,n=e.onlineUsers,t.filter((function(e){return n.includes(e.user)}))).map((function(e){return Object(h.jsx)(vn,{className:_n.a.friend__item,online:!0,id:e.user,first_name:e.first_name,last_name:e.last_name,avatar:e.photo_50})}))]}),Object(h.jsx)("hr",{}),Object(h.jsxs)("div",{className:_n.a.allFriends,children:[Object(h.jsx)("h1",{children:"Other"}),e.friends.map((function(t){return Object(h.jsx)(vn,{className:_n.a.friend__item,online:e.onlineUsers.includes(t.user),id:t.user,first_name:t.first_name,last_name:t.last_name,avatar:t.photo_50})}))]})]});var t,n},Pn=function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(h.jsx)(xn,Object(l.a)({},this.props))}}]),n}(d.a.PureComponent),wn=Object(dt.d)(Object(j.b)((function(e){return{friends:e.friendsPage.friends,waitingFlAccept:e.friendsPage.waitingFlAccept,sentFlQueries:e.friendsPage.sentFlQueries,onlineUsers:e.usersPage.onlineUsers}}),{setFriends:on}),un,Yt,_t)(Pn),Nn=n(238),yn=n.n(Nn),Dn=n(212),kn=n(213),Fn=function(e){if(!e)return"Field is required"},An=function(e){if(!String(e).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/))return"Wrong email address"},In=function(e){return function(t){if(t.length>e)return"Max length is ".concat(e," symbols")}},Un=n(100),Cn=n(56),Tn=n.n(Cn),Sn=n(483),En=n(485),Mn=n(480),Ln=n(482),Rn=n(484),Bn=n(479),Gn=n(477),Hn=n(478),Qn=["input","meta","child"],Wn=["input","meta","child"],Vn=["input","meta","child"],Zn=["input","meta","child"],Xn=["input","meta","child"],zn=function(e){e.input;var t=e.meta,n=(e.child,Object(Un.a)(e,Qn)),s=t.touched&&t.error;return console.log(s),Object(h.jsxs)("div",{style:{position:"relative"},className:Tn.a.form_control+" "+(s?Tn.a.error:""),children:[Object(h.jsx)("div",{children:n.children}),t.touched&&t.error&&Object(h.jsx)("span",{style:{position:"absolute",left:"0",fontSize:"12px"},children:t.error})]})},Yn=function(e){var t=e.input,n=(e.meta,e.child,Object(Un.a)(e,Wn));console.log(e);var s=e.meta.touched&&e.meta.error;return Object(h.jsx)(zn,Object(l.a)(Object(l.a)({},e),{},{children:Object(h.jsx)(Sn.a,Object(l.a)(Object(l.a)({id:"outlined-basic",error:s,label:e.placeholder,variant:"outlined"},t),n))}))},qn=function(e){var t=e.input,n=(e.meta,e.child,Object(Un.a)(e,Vn)),s=d.a.useState(new Date("2014-08-18T21:11:54")),r=Object(de.a)(s,2),a=(r[0],r[1]),i=e.meta.touched&&e.meta.error;return Object(h.jsx)(zn,Object(l.a)(Object(l.a)({},e),{},{children:Object(h.jsx)(Gn.b,{dateAdapter:Bn.a,children:Object(h.jsx)(Hn.a,Object(l.a)(Object(l.a)(Object(l.a)({label:"\u0414\u0430\u0442\u0430 \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f",inputFormat:"MM/dd/yyyy",value:e.input.value,onChange:function(e){a(e)}},t),n),{},{renderInput:function(e){return Object(h.jsx)(Sn.a,Object(l.a)(Object(l.a)(Object(l.a)({error:i},t),n),e))}}))})}))},Jn=function(e){var t=e.input,n=(e.meta,e.child,Object(Un.a)(e,Zn)),s=e.meta.touched&&e.meta.error;return console.log(e),Object(h.jsx)(zn,Object(l.a)(Object(l.a)({},e),{},{children:Object(h.jsx)(Sn.a,Object(l.a)(Object(l.a)({id:"outlined-multiline-static",multiline:!0,rows:4,inputProps:{maxlength:e.maxcharacters},helperText:"".concat(t.value.length,"/").concat(e.maxcharacters),label:e.placeholder,error:s},t),n))}))},Kn=function(e){var t=e.input,n=(e.meta,e.child,Object(Un.a)(e,Xn));console.log(e);var s=e.meta.touched&&e.meta.error;return Object(h.jsx)(zn,Object(l.a)(Object(l.a)({},e),{},{children:Object(h.jsxs)(Rn.a,{sx:{m:1},style:{width:"100%"},children:[Object(h.jsx)(En.a,{id:"demo-simple-select-helper-label",children:e.placeholder}),Object(h.jsxs)(Mn.a,Object(l.a)(Object(l.a)(Object(l.a)({},t),n),{},{labelId:"demo-simple-select-helper-label",id:"demo-simple-select-helper",label:e.placeholder,error:s,children:[Object(h.jsx)(Ln.a,{value:"male",children:"\u043c\u0443\u0436\u0441\u043a\u043e\u0439"}),Object(h.jsx)(Ln.a,{value:"female",children:"\u0436\u0435\u043d\u0441\u043a\u0438\u0439"})]}))]})}))},$n=n(113),es=n.n($n),ts=n(246),ns=(In(10),function(e){var t=Object(u.useState)(null),n=Object(de.a)(t,2),s=n[0],r=n[1],a=e.error;return Object(h.jsx)("form",{onSubmit:e.handleSubmit((function(t){e.login(t.email,t.password,s)})),children:Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{style:{height:"30px"}}),Object(h.jsx)(Dn.a,{style:{width:"100%"},type:"text",name:"email",validate:[Fn,An],placeholder:"email",component:Yn}),Object(h.jsx)("div",{style:{height:"20px"}}),Object(h.jsx)(Dn.a,{style:{width:"100%"},type:"password",name:"password",validate:[Fn],placeholder:"password",component:Yn})]}),Object(h.jsx)("div",{style:{height:"20px"}}),Object(h.jsx)("div",{className:Tn.a.error_field+" "+(a?Tn.a.error_true:""),children:e.error}),Object(h.jsx)("div",{style:{height:"10px"}}),Object(h.jsx)(ts.a,{sitekey:"6LcWT6seAAAAALrCC-PL_23-Cydefkk9o8FFOhkP",onChange:function(e){r(e)}}),Object(h.jsx)("div",{style:{height:"10px"}}),Object(h.jsx)("button",{className:es.a.loginButton,children:"login"})]})})}),ss=ns=Object(kn.a)({form:"loginForm"})(ns),rs=n(241),as=function(e){return e.data.isAuth?Object(h.jsx)(jt.a,{to:"/profile"}):Object(h.jsxs)("div",{className:yn.a.authWrapper,children:[Object(h.jsx)("h1",{children:"Login"}),Object(h.jsx)(ss,{login:e.login}),Object(h.jsx)(rs.a,{to:"registration",children:"\u041d\u0435 \u0437\u0430\u0440\u0435\u0433\u0435\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d?"})]})},is="LOGIN",cs="IS_TOGGLE_FETCHING",os="UPDATE_EMAIL_TEXT",ls="UPDATE_PASSWORD_TEXT",us="SET_AUTH",ds={emailText:"",passwordText:"",isAuth:!1},js=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ds,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case cs:return Object(l.a)(Object(l.a)({},e),{},{isFetching:t.isFetching});case os:return Object(l.a)(Object(l.a)({},e),{},{emailText:t.emailText});case ls:return Object(l.a)(Object(l.a)({},e),{},{passwordText:t.passwordText});case is:return{emailText:null,passwordText:null};case us:return Object(l.a)(Object(l.a)({},e),{},{isAuth:t.isAuth});default:return e}},ps=function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(a.a)(this,n);for(var s=arguments.length,r=new Array(s),i=0;i<s;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).login=function(t,n,s){e.props.login(t,n,s)},e.getUser=function(){e.props.setUsers()},e.Logout=function(){e.props.logout(e.props.email,e.props.password)},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return Object(h.jsx)(h.Fragment,{children:this.props.isAuth?Object(h.jsxs)("div",{children:["\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d\u044b",Object(h.jsxs)("div",{children:[Object(h.jsx)("button",{onClick:this.Logout,children:"logout"}),Object(h.jsx)("button",{onClick:this.getUser,children:"Get user"})]})]}):Object(h.jsx)(as,{data:this.props,login:this.login})})}}]),n}(d.a.Component),_s=Object(j.b)((function(e){return{email:e.login.emailText,password:e.login.passwordText,isAuth:e.auth.isAuth}}),{login:function(e,t,n){return function(s){w(e,t,n).then((function(e){if(200===e.status)localStorage.setItem("token",e.data.accessToken),s(te());else{console.log(e);var t=e.message.length>0?e.message:"Unexpected error";console.log(t),s(Object(H.a)("loginForm",{_error:t}))}}))}},logout:ee,updateEmailText:function(e){return{type:os,emailText:e}},updatePasswordText:function(e){return{type:ls,passwordText:e}},setAuth:function(e){return{type:us,isAuth:e}},setUsers:Xt})(ps),fs=n(242),hs=n.n(fs),bs=(In(10),function(e){console.log(e);var t=e.error;return Object(h.jsx)("form",{onSubmit:e.handleSubmit,children:Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{style:{height:"30px"}}),Object(h.jsx)(Dn.a,{style:{width:"100%"},type:"text",name:"first_name",validate:[Fn],label:"\u0418\u043c\u044f",placeholder:"\u0418\u043c\u044f",component:Yn}),Object(h.jsx)("div",{style:{height:"20px"}}),Object(h.jsx)(Dn.a,{style:{width:"100%"},type:"text",name:"last_name",validate:[Fn],placeholder:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",component:Yn}),Object(h.jsx)("div",{style:{height:"20px"}}),Object(h.jsxs)("div",{className:es.a.regDataAndGenderChoose,style:{display:"flex",alignItems:"center"},children:[Object(h.jsx)("div",{style:{flex:"1 0 50%"},children:Object(h.jsx)(Dn.a,{name:"bth_date",validate:[Fn],component:qn})}),Object(h.jsx)("div",{style:{flex:"0 1 50%"},children:Object(h.jsx)(Dn.a,{name:"gender",placeholder:"\u041f\u043e\u043b",validate:[Fn],component:Kn})})]}),Object(h.jsx)("div",{style:{height:"20px"}})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{style:{height:"30px"}}),Object(h.jsx)(Dn.a,{style:{width:"100%"},type:"text",name:"email",validate:[Fn,An],placeholder:"email",component:Yn}),Object(h.jsx)("div",{style:{height:"20px"}}),Object(h.jsx)(Dn.a,{style:{width:"100%"},type:"password",name:"password",validate:[Fn],placeholder:"password",component:Yn})]}),Object(h.jsx)("div",{style:{height:"20px"}}),Object(h.jsx)("div",{className:Tn.a.error_field+" "+(t?Tn.a.error_true:""),children:e.error}),Object(h.jsx)("div",{style:{height:"10px"}}),Object(h.jsx)("button",{className:es.a.loginButton,children:"registration"})]})})}),Os=bs=Object(kn.a)({form:"registrationForm"})(bs),gs=function(e){return Object(h.jsxs)("div",{className:hs.a.registrationWrapper,children:[Object(h.jsx)("h1",{children:"Registration"}),Object(h.jsx)(Os,{onSubmit:function(t){var n={first_name:t.first_name,last_name:t.last_name,age:t.bth_date,gender:t.gender};console.log(e),e.regUser(t.email,t.password,n)}}),Object(h.jsx)(f.b,{to:"/login",children:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0435\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"})]})},ms=function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(a.a)(this,n);for(var s=arguments.length,r=new Array(s),i=0;i<s;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).regUser=function(t,n,s){e.props.regUser(t,n,s)},e}return Object(i.a)(n,[{key:"render",value:function(){return console.log(this.props),Object(h.jsx)(gs,{regUser:this.regUser})}}]),n}(d.a.Component),vs=Object(j.b)((function(e){return{isAuth:e.auth.isAuth}}),{regUser:function(e,t,n){return function(s){F(e,t,n).then((function(e){if(200===e.status)localStorage.setItem("token",e.data.accessToken),s(te());else{console.log(e);var t=e.message.length>0?e.message:"Unexpected error";console.log(t),s(Object(H.a)("registrationForm",{_error:t}))}}))}}})(ms),xs=n(174),Ps=n.n(xs),ws=function(e){console.log("here is some props"),console.log(e);var t=e.error;return Object(h.jsx)("form",{onSubmit:e.handleSubmit,children:Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{style:{height:"30px"}}),Object(h.jsx)(Dn.a,{style:{width:"100%"},type:"text",maxcharacters:100,name:"description",placeholder:"about me",component:Jn}),Object(h.jsx)("div",{style:{height:"20px"}})]}),Object(h.jsx)("div",{style:{height:"20px"}}),Object(h.jsx)("div",{className:Tn.a.error_field+" "+(t?Tn.a.error_true:""),children:e.error}),e.submitSucceeded&&Object(h.jsx)("div",{className:Ps.a.successMessage,children:"Changes successfully applied"}),Object(h.jsx)("div",{style:{height:"10px"}}),Object(h.jsx)("button",{className:Ps.a.applyChangesButton,children:"apply changes"})]})})},Ns=ws=Object(kn.a)({form:"ProfileSettingsForm"})(ws),ys=function(e){return console.log(e.profileInfo),Object(h.jsxs)("div",{children:[Object(h.jsx)("h1",{children:"Edit your profile"}),Object(h.jsx)(Ns,{initialValues:e.profileInfo,onSubmit:function(t){e.updateUserProfileData(t)}})]})},Ds=function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(h.jsx)(ys,{profileInfo:this.props.profileInfo,updateUserProfileData:this.props.updateUserProfileData})}}]),n}(d.a.Component),ks=Object(dt.d)(_t,Object(j.b)((function(e){return{profileInfo:e.ProfilePage.ProfileData}}),{updateUserProfileData:function(e){return function(){var t=Object(m.a)(g.a.mark((function t(n,s){var r,a;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=s().auth.userId,t.next=3,I.updateUserProfileInfo(e);case 3:200===(a=t.sent).status&&(0===a.data.resultCode?n(Be(r)):n(Object(H.a)("ProfileSettingsForm",{_error:a.data.messages[0]})));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},setUserProfile:Be}))(Ds),Fs=Object(ue.f)((function(e){return console.log(""),Object(h.jsx)("main",{className:le.a.main,children:Object(h.jsx)("div",{className:le.a.container,children:Object(h.jsxs)("div",{className:le.a.main__wrapper,children:[Object(h.jsx)(ce,{}),Object(h.jsxs)("div",{className:le.a.content,children:[Object(h.jsx)(ue.b,{path:"/",element:Object(h.jsx)("div",{children:"Hello"})}),Object(h.jsx)(ue.b,{path:"/profile/:userId?",render:function(){return Object(h.jsx)(ht,{})}}),Object(h.jsx)(ue.b,{path:"/dialogs",render:function(){return Object(h.jsx)(jn,{})}}),Object(h.jsx)(ue.b,{path:"/users",render:function(){return Object(h.jsx)(mn,{})}}),Object(h.jsx)(ue.b,{path:"/Login",render:function(){return Object(h.jsx)(_s,{})}}),Object(h.jsx)(ue.b,{path:"/registration",render:function(){return Object(h.jsx)(vs,{})}}),Object(h.jsx)(ue.b,{path:"/settings",render:function(){return Object(h.jsx)(ks,{})}}),Object(h.jsx)(ue.b,{path:"/friends",render:function(){return Object(h.jsx)(wn,{})}}),Object(h.jsx)(ue.b,{path:"*",element:Object(h.jsx)("div",{children:"Not found"})})]})]})})})})),As="INITIALIZED_SUCCESS",Is={initialized:!1},Us=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Is,t=arguments.length>1?arguments[1]:void 0;return t.type===As?Object(l.a)(Object(l.a)({},e),{},{initialized:!0}):e},Cs=function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialized?Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)(re,{}),Object(h.jsx)(Fs,{})]}):Object(h.jsx)(ct,{})}}]),n}(u.Component),Ts=Object(dt.d)(Object(j.b)((function(e){return{initialized:e.appe.initialized}}),{initializeApp:function(){return function(e,t){var n=e(te());Promise.all([n]).then((function(){e({type:As})}))}},checkAuth:function(){return function(e){try{A().then((function(t){console.log(t),localStorage.setItem("token",t.data.accessToken),e($(!0))}))}catch(s){var t,n;console.log(null===(t=s.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)}}}}),Yt,ue.f)(Cs),Ss=n(243),Es=n(214),Ms=Object(dt.c)({ProfilePage:Ge,messagesPage:At,usersPage:zt,auth:ne,login:js,friendsPage:ln,appe:Us,form:Es.a}),Ls=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):dt.d)(Object(dt.a)(Ss.a)),Rs=Object(dt.e)(Ms,Ls);window.store=Rs;var Bs=Rs,Gs=(n(425),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,491)).then((function(t){var n=t.getCLS,s=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),s(e),r(e),a(e),i(e)}))});r.a.render(Object(h.jsxs)(f.a,{children:[Object(h.jsx)(d.a.StrictMode,{children:Object(h.jsx)(j.a,{store:Bs,children:Object(h.jsx)(Ts,{})})}),","]}),document.getElementById("root")),Gs()},46:function(e,t,n){e.exports={add_post_form:"MyPosts_add_post_form__2RwyT",addFileInput:"MyPosts_addFileInput___Wl0g",addFile:"MyPosts_addFile__1fQt2",postUploadThumbs_item:"MyPosts_postUploadThumbs_item__2NNVE",postUploadThumbs_inner:"MyPosts_postUploadThumbs_inner__2JTnW",postUploadThumbs:"MyPosts_postUploadThumbs__3bwd9",add_post_form_footer:"MyPosts_add_post_form_footer__1CVp3",posts__title:"MyPosts_posts__title__AKYv0",add_post_title:"MyPosts_add_post_title__3BxDv",post_input:"MyPosts_post_input__5ETeO",add_post_button:"MyPosts_add_post_button__34bW9",posts:"MyPosts_posts__3O0qy"}},48:function(e,t,n){e.exports={"content-hat":"Profile_content-hat__3aOh6",profile__wrapper:"Profile_profile__wrapper__1pdOm",profile_info:"Profile_profile_info__1SiPY",profile_data_wrapper:"Profile_profile_data_wrapper__2rJ0U",profile_avatar:"Profile_profile_avatar__8aYjX",avatar_img:"Profile_avatar_img__E1lih",description:"Profile_description__3GJ7v",profile_age:"Profile_profile_age__VNnnX",profile_gender:"Profile_profile_gender__2u2gE",profile_avatar_wrapper:"Profile_profile_avatar_wrapper__27dAt",avatar_image_cover:"Profile_avatar_image_cover__3NM9n",edit_info_btn:"Profile_edit_info_btn__14SOw",profile_name:"Profile_profile_name__2JgMM",edit_avatar_image:"Profile_edit_avatar_image__24XLx"}},56:function(e,t,n){e.exports={form_control:"FormControls_form_control__2WCOC",error:"FormControls_error__2hPDz",error_field:"FormControls_error_field__1pXVU",error_true:"FormControls_error_true__3smVm"}},57:function(e,t,n){e.exports={previewImage:"DropZonePopup_previewImage__1wUMD",dropZone_field:"DropZonePopup_dropZone_field__3idgT",dropAccept:"DropZonePopup_dropAccept__JvDLL",dropReject:"DropZonePopup_dropReject__Q7x8C",largeAvatarPreview:"DropZonePopup_largeAvatarPreview__1wE32",littleAvatarPreview:"DropZonePopup_littleAvatarPreview__1Yk7F",applyNewAvatarBtn:"DropZonePopup_applyNewAvatarBtn__3iLn3"}},70:function(e,t,n){e.exports={header:"Header_header__1MI8z",header__wrapper:"Header_header__wrapper__35GRD",header__logo:"Header_header__logo__LxSu9",container:"Header_container__3_s-A","icon-menu":"Header_icon-menu__25sRK",header_avatar:"Header_header_avatar__3x9U2",header_logout:"Header_header_logout__1ef3n",header_login:"Header_header_login__26BbT",header_user_wrapper:"Header_header_user_wrapper__3irwF",active:"Header_active__2fa-x"}},73:function(e,t,n){e.exports={searchFilterInput:"Users_searchFilterInput__9sBwY",usersContainer:"Users_usersContainer__Ay_A6"}},99:function(e,t,n){e.exports={own_status:"ProfileStatus_own_status__26vju",own_status_container:"ProfileStatus_own_status_container__Sb3M3",edit_status:"ProfileStatus_edit_status__3ma2b",edit_status_container:"ProfileStatus_edit_status_container__3lKJ3"}}},[[426,1,2]]]);
//# sourceMappingURL=main.4f809cf0.chunk.js.map